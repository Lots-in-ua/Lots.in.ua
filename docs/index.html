<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Lots UA — інтерактивна карта</title>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

<style>
body{margin:0;font-family:Arial,sans-serif;height:100vh}
#map{height:calc(100vh - 60px)}
.header{display:flex;justify-content:space-between;align-items:center;
        background:linear-gradient(to right,#0057B7,#FFD700);color:#fff;font-weight:bold;padding:5px 10px}
.header .title{flex-grow:1;text-align:center;font-size:20px}
.legend{background:rgba(255,255,255,.9);padding:6px 8px;border-radius:4px;
        box-shadow:0 0 4px rgba(0,0,0,.2);font-size:14px;line-height:22px}
.legend img{vertical-align:middle;margin-right:4px}
</style>
</head>
<body>
  <div class="header">
    <div>+380 68 715 59 96</div>
    <div class="title">Актуальні пропозиції</div>
  </div>
  <div id="map"></div>

<script>
/* === 1. Карта === */
const map=L.map('map').setView([50.45,30.5234],8);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
 {attribution:'&copy; OpenStreetMap'}).addTo(map);

/* === 2. PNG-іконки з CDN === */
const CDN='https://cdn.jsdelivr.net/npm/leaflet-color-markers@1.1.1/img/';
const shadow=CDN+'marker-shadow.png';
function markerIcon(color,type){
  const opt={
    iconUrl:CDN+`marker-icon-${color}.png`,
    shadowUrl:shadow,
    iconSize:[25,41],iconAnchor:[12,41],
    popupAnchor:[1,-34],shadowSize:[41,41]
  };
  if(type==='house'){              // збільшуємо «домик»
    opt.iconSize=[35,55];
    opt.iconAnchor=[17,55];
    opt.popupAnchor=[1,-46];
    opt.shadowSize=[55,55];
  }
  return new L.Icon(opt);
}

/* === 3. Дані === */
const plots=[
  {visible:true ,type:'plot' ,color:'blue'  ,coords:[49.818339,30.991579],name:'Очеретяне',
   price:'$4900',size:'0.52 га',dist:'60 км',link:'https://sites.google.com/view/zelenky-35'},
  {visible:true ,type:'house',color:'green' ,coords:[49.858071,30.354294],name:'М. Антонівка (хата)',
   price:'$6900',size:'0.31 га',dist:'74 км',link:'https://sites.google.com/view/mala-antonivka-hata'},
  {visible:true ,type:'plot' ,color:'red'   ,coords:[50.177453,29.923875],name:'Дорогинка',
   price:'$7500',size:'0.26 га',dist:'55 км',link:'https://sites.google.com/view/dorogynka7500'},
  {visible:true ,type:'plot' ,color:'yellow',coords:[49.955224,29.669791],name:'Ставище 25',
   price:'$5900',size:'0.25 га',dist:'80 км',link:'https://sites.google.com/view/5-900'},
  {visible:true ,type:'plot' ,color:'orange',coords:[49.769642,31.547382],name:'Келеберда',
   price:'$1500',size:'0.10 га',dist:'115 км',link:'https://sites.google.com/view/keleberda-1500'}
];

/* === 4. Маркери === */
plots.forEach(p=>{
  if(!p.visible) return;
  L.marker(p.coords,{
      icon:markerIcon(p.color,p.type),
      zIndexOffset:p.type==='plot'?500:0     // крапелька поверх домика
  })
  .addTo(map)
  .bindPopup(`<b>${p.name}</b><br>
              Ціна: ${p.price}<br>
              Площа: ${p.size}<br>
              Відстань: ${p.dist}<br>
              <a href="${p.link}" target="_blank">Докладніше</a>`);
});

/* === 5. Легенда === */
const legend=L.control({position:'bottomleft'});
legend.onAdd=function(){
  const d=L.DomUtil.create('div','legend');
  [['blue','Активна'],['green','Резерв/Аванс'],['red','Продано'],
   ['yellow','Умовно вільна'],['orange','Нова']]
   .forEach(([c,l])=>d.innerHTML+=
     `<img src="${CDN}marker-icon-${c}.png" width="13"> ${l}<br>`);
  d.innerHTML+=`<img src="${CDN}marker-icon-green.png" width="18"
                   style="transform:scale(1.4);vertical-align:middle"> ділянка з будинком`;
  return d;
};
legend.addTo(map);
</script>
</body>
</html>
