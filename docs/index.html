<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Інтерактивна карта готових до продажу земельних ділянок</title>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

    <style>
        body{margin:0;padding:0;font-family:Arial, sans-serif;height:100vh;text-align:center}
        #map{width:100%;height:calc(100vh - 60px)}
        .header{display:flex;justify-content:space-between;align-items:center;
                background:linear-gradient(to right,#0057B7,#FFD700);
                padding:5px 10px;color:#fff;font-weight:bold;font-size:16px}
        .header .title{flex-grow:1;text-align:center;font-size:20px}
        .contact{display:flex;align-items:center}
        .contact img{width:28px;height:28px;margin-left:8px}
        /* Легенда */
        .legend{
            background:rgba(255,255,255,0.9);
            padding:6px 8px;
            font-size:14px;
            border-radius:4px;
            box-shadow:0 0 4px rgba(0,0,0,0.2);
            line-height:24px;
        }
        .legend img{vertical-align:middle;margin-right:4px}
    </style>
</head>
<body>
    <div class="header">
        <div class="contact">
            <span>+380 68 715 59 96</span>
            <a href="tel:+380687155996"><img src="https://cdn-icons-png.flaticon.com/512/724/724664.png" alt="Телефон"></a>
            <a href="https://t.me/AILandHUB" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram"></a>
        </div>
        <div class="title">Найкращі актуальні пропозиції</div>
    </div>

    <div id="map"></div>

    <script>
        /* ---------- 1. Создаём карту ---------- */
        const map = L.map('map').setView([50.4501, 30.5234], 8);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors', language: 'uk'
        }).addTo(map);

        /* ---------- 2. Определяем иконки разных цветов ---------- */
        const iconBase = 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/';
        const shadow = iconBase + 'marker-shadow.png';

        const iconColors = {
            blue:   new L.Icon({ iconUrl: iconBase + 'marker-icon-blue.png',   shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34], shadowSize:[41,41] }),
            green:  new L.Icon({ iconUrl: iconBase + 'marker-icon-green.png',  shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34], shadowSize:[41,41] }),
            red:    new L.Icon({ iconUrl: iconBase + 'marker-icon-red.png',    shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34], shadowSize:[41,41] }),
            yellow: new L.Icon({ iconUrl: iconBase + 'marker-icon-yellow.png', shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34], shadowSize:[41,41] }),
            orange: new L.Icon({ iconUrl: iconBase + 'marker-icon-orange.png', shadowUrl: shadow, iconSize:[25,41], iconAnchor:[12,41], popupAnchor:[1,-34], shadowSize:[41,41] })
        };

        /* ---------- 3. Данные по участкам ---------- */
        const plots = [
            { coords:[49.818339,30.991579], name:"Очеретяне",         price:"$4,900", size:"0.52 га", distance:"60 км", link:"https://sites.google.com/view/zelenky-35",       color:"blue"  },
            { coords:[49.844932,30.341834], name:"Мала Антонівка",     price:"$5,000", size:"0.50 га", distance:"74 км", link:"https://sites.google.com/view/malaantonivka/%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F-%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0", color:"green" },
            { coords:[50.177453,29.923875], name:"Дорогинка",          price:"$7,500", size:"0.26 га", distance:"55 км", link:"https://sites.google.com/view/dorogynka7500?usp=sharing",                                    color:"red"   },
            { coords:[49.858071,30.354294], name:"Мала Антонівка з Хатою", price:"$6,900", size:"0.31 га", distance:"74 км", link:"https://sites.google.com/view/mala-antonivka-hata?usp=sharing",                         color:"yellow"},
            { coords:[49.769642,31.547382], name:"Келеберда",          price:"$1,500", size:"0.10 га", distance:"115 км",link:"https://sites.google.com/view/keleberda-1500?usp=sharing",                                   color:"orange"},
            /* …добавляйте остальные участки так же, указывая нужный color … */
        ];

        /* ---------- 4. Выводим маркеры ---------- */
        plots.forEach(p => {
            const icon = iconColors[p.color] || iconColors.blue; // default = blue
            const marker = L.marker(p.coords, {icon}).addTo(map);
            marker.bindPopup(`
                <b>${p.name}</b><br>
                Ціна: ${p.price}<br>
                Площа: ${p.size}<br>
                Відстань до Києва: ${p.distance}<br>
                <a href="${p.link}" target="_blank">Докладніше</a>
            `);

            if (window.innerWidth > 768){
                marker.on('mouseover', () => marker.openPopup());
                marker.on('mouseout', () => setTimeout(()=>marker.closePopup(), 1000));
            }
        });

        /* ---------- 5. Легенда ---------- */
        const legendItems = [
            {color:'blue',   label:'Активна пропозиція'},
            {color:'green',  label:'Резерв / аванс'},
            {color:'red',    label:'Продано'},
            {color:'yellow', label:'Умовно вільна'},
            {color:'orange', label:'Нова / перегляд'}
        ];

        const legend = L.control({position:'bottomleft'});
        legend.onAdd = () => {
            const div = L.DomUtil.create('div', 'legend');
            legendItems.forEach(item => {
                div.innerHTML += `<img src="${iconBase}marker-icon-${item.color}.png" height="20" width="13"> ${item.label}<br>`;
            });
            return div;
        };
        legend.addTo(map);
    </script>
</body>
</html>
